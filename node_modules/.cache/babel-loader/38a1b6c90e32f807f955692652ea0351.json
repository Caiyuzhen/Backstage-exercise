{"ast":null,"code":"//login module çš„æ•°æ®æ¨¡åž‹\nimport { makeAutoObservable } from 'mobx';\nimport { http, setToken, getToken } from '@/utils';\n\nclass LoginStore {\n  //çŸ­è·¯è¿ç®—ç¬¦:ç¬¬ä¸€ä¸ªä¸ºçœŸåˆ™æ‰§è¡Œç¬¬ä¸€ä¸ªçš„ç»“æžœï¼Œåœ¨ã€åˆå§‹åŒ–ã€‘ä¹‹å‰ï¼Œè°ƒç”¨æœ¬åœ°çš„ tokenï¼Œå¦‚æžœæ²¡æœ‰çš„è¯æ‰ç»™å®ƒç©ºå€¼\n  //åˆå§‹åŒ–å¤„ç†ï¼Œå“åº”å¼æ•°æ®\n  constructor() {\n    this.token = getToken() || '';\n\n    this.getToken = async _ref => {\n      let {\n        mobile,\n        code\n      } = _ref;\n      //æŽ¥æ”¶è¾“å…¥æ¡†ä¼ å…¥çš„ {usename,password} æ•°æ®ï¼Œè§£æž„èµ‹å€¼, {mobile,code} æ˜¯åŽç«¯è¦æ±‚çš„å‘½åç \n      //ç”¨å¼‚æ­¥å‡½æ•°æŠŠå‚æ•°å‘é€å‡ºåŽ»ï¼Œè°ƒç”¨ç™»å½•æŽ¥å£ (token é‰´æƒæŽ¥å£)\n      const res = await http.post('http://geek.itheima.net/v1_0/authorizations', {\n        mobile,\n        code\n      }); //æ‹¿åˆ° token å¹¶å¾€ã€å†…å­˜ã€‘å­˜å…¥ token æ•°æ®\n\n      this.token = res.data.token; //æŠŠ token å­˜å…¥ localStorage\n\n      setToken(this.token);\n    };\n\n    this.deleteToken = () => {};\n\n    makeAutoObservable(this);\n  } //ðŸ‘‡å®šä¹‰èŽ·å¾— token çš„æ–¹æ³•, ðŸ”¥ðŸ”¥ðŸ”¥ç„¶åŽåœ¨ä¸šåŠ¡ç»„ä»¶é‡Œè¾¹è°ƒç”¨è¿™ä¸ªç±»çš„è¿™ä¸ªæ–¹æ³•è¿›è¡Œä¼ å‚æ•°\n\n\n}\n\nexport default LoginStore;","map":{"version":3,"names":["makeAutoObservable","http","setToken","getToken","LoginStore","constructor","token","mobile","code","res","post","data","deleteToken"],"sources":["/Users/zen/Desktop/Backstage-exercise/src/store/login.Store.js"],"sourcesContent":["//login module çš„æ•°æ®æ¨¡åž‹\nimport { makeAutoObservable } from 'mobx';\nimport { http,setToken,getToken } from '@/utils'\n\n\n\nclass LoginStore {\n\ttoken = getToken() || ''//çŸ­è·¯è¿ç®—ç¬¦:ç¬¬ä¸€ä¸ªä¸ºçœŸåˆ™æ‰§è¡Œç¬¬ä¸€ä¸ªçš„ç»“æžœï¼Œåœ¨ã€åˆå§‹åŒ–ã€‘ä¹‹å‰ï¼Œè°ƒç”¨æœ¬åœ°çš„ tokenï¼Œå¦‚æžœæ²¡æœ‰çš„è¯æ‰ç»™å®ƒç©ºå€¼\n\n\t//åˆå§‹åŒ–å¤„ç†ï¼Œå“åº”å¼æ•°æ®\n\tconstructor(){\n\t\tmakeAutoObservable(this)\n\t}\n\n\t//ðŸ‘‡å®šä¹‰èŽ·å¾— token çš„æ–¹æ³•, ðŸ”¥ðŸ”¥ðŸ”¥ç„¶åŽåœ¨ä¸šåŠ¡ç»„ä»¶é‡Œè¾¹è°ƒç”¨è¿™ä¸ªç±»çš„è¿™ä¸ªæ–¹æ³•è¿›è¡Œä¼ å‚æ•°\n\tgetToken = async ({mobile,code}) => {//æŽ¥æ”¶è¾“å…¥æ¡†ä¼ å…¥çš„ {usename,password} æ•°æ®ï¼Œè§£æž„èµ‹å€¼, {mobile,code} æ˜¯åŽç«¯è¦æ±‚çš„å‘½åç \n\n\t//ç”¨å¼‚æ­¥å‡½æ•°æŠŠå‚æ•°å‘é€å‡ºåŽ»ï¼Œè°ƒç”¨ç™»å½•æŽ¥å£ (token é‰´æƒæŽ¥å£)\n\t\tconst res = await http.post('http://geek.itheima.net/v1_0/authorizations',{\n\t\t\tmobile,code\n\t\t})\n\t\t\n\t\t//æ‹¿åˆ° token å¹¶å¾€ã€å†…å­˜ã€‘å­˜å…¥ token æ•°æ®\n\t\tthis.token = res.data.token\n\t\t\n\t\t//æŠŠ token å­˜å…¥ localStorage\n\t\tsetToken(this.token)\t\t\n\t}\n\n\t//ðŸ‘‡å®šä¹‰åˆ é™¤ token çš„æ–¹æ³•\n\tdeleteToken = () => {\n\t\t\n\t}\n}\n\nexport default LoginStore"],"mappings":"AAAA;AACA,SAASA,kBAAT,QAAmC,MAAnC;AACA,SAASC,IAAT,EAAcC,QAAd,EAAuBC,QAAvB,QAAuC,SAAvC;;AAIA,MAAMC,UAAN,CAAiB;EACQ;EAExB;EACAC,WAAW,GAAE;IAAA,KAHbC,KAGa,GAHLH,QAAQ,MAAM,EAGT;;IAAA,KAKbA,QALa,GAKF,cAAyB;MAAA,IAAlB;QAACI,MAAD;QAAQC;MAAR,CAAkB;MAAC;MAErC;MACC,MAAMC,GAAG,GAAG,MAAMR,IAAI,CAACS,IAAL,CAAU,6CAAV,EAAwD;QACzEH,MADyE;QAClEC;MADkE,CAAxD,CAAlB,CAHmC,CAOnC;;MACA,KAAKF,KAAL,GAAaG,GAAG,CAACE,IAAJ,CAASL,KAAtB,CARmC,CAUnC;;MACAJ,QAAQ,CAAC,KAAKI,KAAN,CAAR;IACA,CAjBY;;IAAA,KAoBbM,WApBa,GAoBC,MAAM,CAEnB,CAtBY;;IACZZ,kBAAkB,CAAC,IAAD,CAAlB;EACA,CANe,CAQhB;;;AARgB;;AA6BjB,eAAeI,UAAf"},"metadata":{},"sourceType":"module"}