{"ast":null,"code":"//登录模块业务组件 login module\nimport { makeAutoObservable } from 'mobx';\nimport { http, setToken, getToken } from '@/utils';\n\nclass LoginStore {\n  //初始化之前，调用本地的 token，如果没有的话才给它空值\n  //初始化处理，响应式数据\n  constructor() {\n    this.token = getToken() | '';\n\n    this.getToken = async _ref => {\n      let {\n        mobile,\n        code\n      } = _ref;\n      //接收输入框传入的 {usename,password} 数据，解构赋值, {mobile,code} 是后端要求的命名码\n      //用异步函数把参数发送出去，调用登录接口 (token 鉴权接口)\n      const res = await http.post('http://geek.itheima.net/v1_0/authorizations', {\n        mobile,\n        code\n      }); //拿到 token 并往【内存】存入 token 数据\n\n      this.token = res.data.token; //存入 localStorage\n\n      setToken(this.token);\n    };\n\n    makeAutoObservable(this);\n  } //👇定义获得 token 的方法, 🔥🔥🔥然后在业务组件里边调用这个类的这个方法进行传参数\n\n\n}\n\nexport default LoginStore;","map":{"version":3,"names":["makeAutoObservable","http","setToken","getToken","LoginStore","constructor","token","mobile","code","res","post","data"],"sources":["/Users/zen/Desktop/Backstage-exercise/src/store/login.Store.js"],"sourcesContent":["//登录模块业务组件 login module\nimport { makeAutoObservable } from 'mobx';\nimport { http,setToken,getToken } from '@/utils'\n\n\n\n\nclass LoginStore {\n\ttoken = getToken() |''//初始化之前，调用本地的 token，如果没有的话才给它空值\n\n\t//初始化处理，响应式数据\n\tconstructor(){\n\t\tmakeAutoObservable(this)\n\t}\n\n\t//👇定义获得 token 的方法, 🔥🔥🔥然后在业务组件里边调用这个类的这个方法进行传参数\n\tgetToken = async ({mobile,code}) => {//接收输入框传入的 {usename,password} 数据，解构赋值, {mobile,code} 是后端要求的命名码\n\n\t//用异步函数把参数发送出去，调用登录接口 (token 鉴权接口)\n\t\tconst res = await http.post('http://geek.itheima.net/v1_0/authorizations',{\n\t\t\tmobile,code\n\t\t})\n\t\t\n\t\t//拿到 token 并往【内存】存入 token 数据\n\t\tthis.token = res.data.token\n\t\t\n\t\t//存入 localStorage\n\t\tsetToken(this.token)\n\t\t\n\t\t\n\t}\n}\n\nexport default LoginStore"],"mappings":"AAAA;AACA,SAASA,kBAAT,QAAmC,MAAnC;AACA,SAASC,IAAT,EAAcC,QAAd,EAAuBC,QAAvB,QAAuC,SAAvC;;AAKA,MAAMC,UAAN,CAAiB;EACM;EAEtB;EACAC,WAAW,GAAE;IAAA,KAHbC,KAGa,GAHLH,QAAQ,KAAI,EAGP;;IAAA,KAKbA,QALa,GAKF,cAAyB;MAAA,IAAlB;QAACI,MAAD;QAAQC;MAAR,CAAkB;MAAC;MAErC;MACC,MAAMC,GAAG,GAAG,MAAMR,IAAI,CAACS,IAAL,CAAU,6CAAV,EAAwD;QACzEH,MADyE;QAClEC;MADkE,CAAxD,CAAlB,CAHmC,CAOnC;;MACA,KAAKF,KAAL,GAAaG,GAAG,CAACE,IAAJ,CAASL,KAAtB,CARmC,CAUnC;;MACAJ,QAAQ,CAAC,KAAKI,KAAN,CAAR;IAGA,CAnBY;;IACZN,kBAAkB,CAAC,IAAD,CAAlB;EACA,CANe,CAQhB;;;AARgB;;AA0BjB,eAAeI,UAAf"},"metadata":{},"sourceType":"module"}