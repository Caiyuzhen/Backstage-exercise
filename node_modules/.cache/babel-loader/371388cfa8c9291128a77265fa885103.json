{"ast":null,"code":"//login module ÁöÑÊï∞ÊçÆÊ®°Âûã\nimport { makeAutoObservable } from 'mobx';\nimport { http, setToken, getToken, removeToken } from '@/utils';\n\nclass LoginStore {\n  //Áü≠Ë∑ØËøêÁÆóÁ¨¶:Á¨¨‰∏Ä‰∏™‰∏∫ÁúüÂàôÊâßË°åÁ¨¨‰∏Ä‰∏™ÁöÑÁªìÊûúÔºåÂú®„ÄêÂàùÂßãÂåñ„Äë‰πãÂâçÔºåË∞ÉÁî®Êú¨Âú∞ÁöÑ tokenÔºåÂ¶ÇÊûúÊ≤°ÊúâÁöÑËØùÊâçÁªôÂÆÉÁ©∫ÂÄº\n  //ÂàùÂßãÂåñÂ§ÑÁêÜÔºåÂìçÂ∫îÂºèÊï∞ÊçÆ\n  constructor() {\n    this.token = getToken() || '';\n\n    this.getToken = async _ref => {\n      let {\n        mobile,\n        code\n      } = _ref;\n      //Êé•Êî∂ËæìÂÖ•Ê°Ü‰º†ÂÖ•ÁöÑ {usename,password} Êï∞ÊçÆÔºåËß£ÊûÑËµãÂÄº, {mobile,code} ÊòØÂêéÁ´ØË¶ÅÊ±ÇÁöÑÂëΩÂêçÁ†Å\n      //Áî®ÂºÇÊ≠•ÂáΩÊï∞ÊääÂèÇÊï∞ÂèëÈÄÅÂá∫ÂéªÔºåË∞ÉÁî®ÁôªÂΩïÊé•Âè£ (token Èâ¥ÊùÉÊé•Âè£)\n      const res = await http.post('http://geek.itheima.net/v1_0/authorizations', {\n        mobile,\n        code\n      }); //ÊãøÂà∞ token Âπ∂ÂæÄ„ÄêÂÜÖÂ≠ò„ÄëÂ≠òÂÖ• token Êï∞ÊçÆ\n\n      this.token = res.data.token; //Êää token Â≠òÂÖ• localStorage\n\n      setToken(this.token);\n    };\n\n    this.deleteToken = () => {\n      this.token = ''; //Âà†Èô§ÂÜÖÂ≠ò‰∏≠ÁöÑ token\n\n      removeToken(); //Âà†Èô§Êú¨Âú∞ÊµèËßàÂô® token\n    };\n\n    makeAutoObservable(this);\n  } //üëáÂÆö‰πâËé∑Âæó token ÁöÑÊñπÊ≥ï, üî•üî•üî•ÁÑ∂ÂêéÂú®‰∏öÂä°ÁªÑ‰ª∂ÈáåËæπË∞ÉÁî®Ëøô‰∏™Á±ªÁöÑËøô‰∏™ÊñπÊ≥ïËøõË°å‰º†ÂèÇÊï∞\n\n\n}\n\nexport default LoginStore;","map":{"version":3,"names":["makeAutoObservable","http","setToken","getToken","removeToken","LoginStore","constructor","token","mobile","code","res","post","data","deleteToken"],"sources":["/Users/zen/Desktop/Backstage-exercise/src/store/login.Store.js"],"sourcesContent":["//login module ÁöÑÊï∞ÊçÆÊ®°Âûã\nimport { makeAutoObservable } from 'mobx';\nimport { http,setToken,getToken,removeToken } from '@/utils'\n\n\n\nclass LoginStore {\n\ttoken = getToken() || ''//Áü≠Ë∑ØËøêÁÆóÁ¨¶:Á¨¨‰∏Ä‰∏™‰∏∫ÁúüÂàôÊâßË°åÁ¨¨‰∏Ä‰∏™ÁöÑÁªìÊûúÔºåÂú®„ÄêÂàùÂßãÂåñ„Äë‰πãÂâçÔºåË∞ÉÁî®Êú¨Âú∞ÁöÑ tokenÔºåÂ¶ÇÊûúÊ≤°ÊúâÁöÑËØùÊâçÁªôÂÆÉÁ©∫ÂÄº\n\n\t//ÂàùÂßãÂåñÂ§ÑÁêÜÔºåÂìçÂ∫îÂºèÊï∞ÊçÆ\n\tconstructor(){\n\t\tmakeAutoObservable(this)\n\t}\n\n\t//üëáÂÆö‰πâËé∑Âæó token ÁöÑÊñπÊ≥ï, üî•üî•üî•ÁÑ∂ÂêéÂú®‰∏öÂä°ÁªÑ‰ª∂ÈáåËæπË∞ÉÁî®Ëøô‰∏™Á±ªÁöÑËøô‰∏™ÊñπÊ≥ïËøõË°å‰º†ÂèÇÊï∞\n\tgetToken = async ({mobile,code}) => {//Êé•Êî∂ËæìÂÖ•Ê°Ü‰º†ÂÖ•ÁöÑ {usename,password} Êï∞ÊçÆÔºåËß£ÊûÑËµãÂÄº, {mobile,code} ÊòØÂêéÁ´ØË¶ÅÊ±ÇÁöÑÂëΩÂêçÁ†Å\n\n\t//Áî®ÂºÇÊ≠•ÂáΩÊï∞ÊääÂèÇÊï∞ÂèëÈÄÅÂá∫ÂéªÔºåË∞ÉÁî®ÁôªÂΩïÊé•Âè£ (token Èâ¥ÊùÉÊé•Âè£)\n\t\tconst res = await http.post('http://geek.itheima.net/v1_0/authorizations',{\n\t\t\tmobile,code\n\t\t})\n\t\t\n\t\t//ÊãøÂà∞ token Âπ∂ÂæÄ„ÄêÂÜÖÂ≠ò„ÄëÂ≠òÂÖ• token Êï∞ÊçÆ\n\t\tthis.token = res.data.token\n\t\t\n\t\t//Êää token Â≠òÂÖ• localStorage\n\t\tsetToken(this.token)\t\t\n\t}\n\n\t//üëáÂÆö‰πâÂà†Èô§ token ÁöÑÊñπÊ≥ï(Ê≥®ÊÑèÔºåËøôÈáå‰∏çËÉΩÁî®ÂØºËà™Âà∞ÁôªÂΩïÈ°µÁöÑ useNavigate ÊñπÊ≥ïÔºåÂõ†‰∏∫Ëøô‰∏™‰πüÊòØ hook ÁªÑ‰ª∂ÔºÅÂè™ËÉΩÂú®ÂáΩÊï∞ÂÜÖ‰ΩøÁî®ÔºÅ)\n\tdeleteToken = () => {\n\t\tthis.token = ''//Âà†Èô§ÂÜÖÂ≠ò‰∏≠ÁöÑ token\n\t\tremoveToken()//Âà†Èô§Êú¨Âú∞ÊµèËßàÂô® token\n\t}\n}\n\nexport default LoginStore"],"mappings":"AAAA;AACA,SAASA,kBAAT,QAAmC,MAAnC;AACA,SAASC,IAAT,EAAcC,QAAd,EAAuBC,QAAvB,EAAgCC,WAAhC,QAAmD,SAAnD;;AAIA,MAAMC,UAAN,CAAiB;EACQ;EAExB;EACAC,WAAW,GAAE;IAAA,KAHbC,KAGa,GAHLJ,QAAQ,MAAM,EAGT;;IAAA,KAKbA,QALa,GAKF,cAAyB;MAAA,IAAlB;QAACK,MAAD;QAAQC;MAAR,CAAkB;MAAC;MAErC;MACC,MAAMC,GAAG,GAAG,MAAMT,IAAI,CAACU,IAAL,CAAU,6CAAV,EAAwD;QACzEH,MADyE;QAClEC;MADkE,CAAxD,CAAlB,CAHmC,CAOnC;;MACA,KAAKF,KAAL,GAAaG,GAAG,CAACE,IAAJ,CAASL,KAAtB,CARmC,CAUnC;;MACAL,QAAQ,CAAC,KAAKK,KAAN,CAAR;IACA,CAjBY;;IAAA,KAoBbM,WApBa,GAoBC,MAAM;MACnB,KAAKN,KAAL,GAAa,EAAb,CADmB,CACJ;;MACfH,WAAW,GAFQ,CAEN;IACb,CAvBY;;IACZJ,kBAAkB,CAAC,IAAD,CAAlB;EACA,CANe,CAQhB;;;AARgB;;AA8BjB,eAAeK,UAAf"},"metadata":{},"sourceType":"module"}